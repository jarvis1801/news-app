package com.listing.book.jarvis.newsapp;import android.app.AlertDialog;import android.content.Context;import android.net.ConnectivityManager;import android.net.NetworkInfo;import android.os.Bundle;import android.support.annotation.NonNull;import android.support.v4.app.FragmentActivity;import android.support.v4.app.LoaderManager;import android.support.v4.content.Loader;import android.support.v7.widget.LinearLayoutManager;import android.support.v7.widget.RecyclerView;import com.listing.book.jarvis.newsapp.List.NewsAdapter;import com.listing.book.jarvis.newsapp.Loader.NewsLoader;import com.listing.book.jarvis.newsapp.Model.News;import java.util.ArrayList;import dmax.dialog.SpotsDialog;public class MainActivity extends FragmentActivity implements LoaderManager.LoaderCallbacks<ArrayList<News>> {    private final static String url = "https://content.guardianapis.com/search?api-key=3095e20c-9d16-4c5b-bc1c-700cc096b6a9&show-elements=all&page-size=50&show-fields=thumbnail";    private static final int NEWS_LOADER_ID = 1;    private RecyclerView mRecyclerView;    private RecyclerView.Adapter mAdapter;    private RecyclerView.LayoutManager mLayoutManager;    private AlertDialog alertDialog;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.news_listing);        mRecyclerView = (RecyclerView) findViewById(R.id.my_recycler_view);        mRecyclerView.setHasFixedSize(true);        mLayoutManager = new LinearLayoutManager(this);        mRecyclerView.setLayoutManager(mLayoutManager);        ConnectivityManager cm =                (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);        NetworkInfo activeNetwork = cm.getActiveNetworkInfo();        boolean isConnected = activeNetwork != null &&                activeNetwork.isConnectedOrConnecting();        if (isConnected) {            getSupportLoaderManager().initLoader(NEWS_LOADER_ID, null, this).forceLoad();        }    }    @Override    public Loader<ArrayList<News>> onCreateLoader(int id, Bundle args) {        showDialog("Loading ...");        return new NewsLoader(this, url);    }    @Override    public void onLoadFinished(@NonNull Loader<ArrayList<News>> loader, ArrayList<News> news) {        mAdapter = new NewsAdapter(getApplicationContext(), news);        mRecyclerView.setAdapter(mAdapter);        dismissDialog();    }    @Override    public void onLoaderReset(@NonNull Loader<ArrayList<News>> loader) {        dismissDialog();    }    public void showDialog(String msg) {        alertDialog = new SpotsDialog.Builder()                .setContext(MainActivity.this)                .setMessage(msg)                .setCancelable(false)                .build();        alertDialog.show();    }    public void dismissDialog() {        alertDialog.dismiss();    }}